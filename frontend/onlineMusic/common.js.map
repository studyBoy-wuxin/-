{"version":3,"file":"common.js","sources":["webpack:///._src_RouteInfo_index.ts","webpack:///._src_accept_images_p1.jpg","webpack:///._src_components_NavigationBar_IconfontStyle.css","webpack:///._src_components_NavigationBar_index.sass","webpack:///._src_components_NavigationBar_index.tsx","webpack:///._src_util_request.ts"],"sourcesContent":["import {axios} from \"taro-axios\";\r\nimport request from \"../util/request\";\r\nimport {Music} from \"../pages/Admin\";\r\n\r\n\r\n// User用户管理模块\r\nexport const loginRequest = (params:{Uid:string,Upassword:string})=>request('/User/login',params,'POST')\r\nexport const updateUser = (params:{Uid:string,Uname?:string,sex?:number,avater_url?:string})=>request(\"/User/updateUser\",params,'POST')\r\nexport const register = (params:{Uname:string,Upassword:string,sex:number})=>request('/User/register',params,'POST')\r\n\r\n// Banner 头部横幅管理区\r\nexport const findAllBanner = ()=>request('/Banner/findAllBanner')\r\n\r\n\r\n\r\n// RecommendSong 推荐歌单管理区\r\nexport const findAllRecommendSong = ()=>request('/RecommendSong/findAllRecommendSong')\r\n\r\n\r\n// Recommend_Music 推荐歌曲管理区\r\nexport const findMusicByrid = (params:{rid:string})=>request('/Recommend_Music/findMusicByrid',params)\r\n\r\n\r\n\r\n//  music音乐管理区\r\nexport const findMusicByid = (params:{mid:string})=>request('/Music/findMusicByid',params)\r\nexport const findMusicByName = (params:{name:string})=>request('/Music/findMusicByName',params)\r\nexport const insertMusic = (data:Music[])=>request(\"/Music/insertMusic\",{},'POST',data)\r\nexport const text = (data:Music[])=>request('/Music/text',{},'POST',data)\r\n\r\n// 查找榜音乐的信息\r\nexport const findMusicByBangidList = (params:{BangidList:string})=>request('/Music/findMusicByBangidList',params)\r\n\r\n\r\n\r\n\r\n// Bang 排行榜管理区\r\nexport const findAllBang = ()=>request('/Bang/findAllBang')\r\n\r\n\r\n\r\n\r\n\r\n// Bang_Music 排行榜音乐管理区\r\n\r\n\r\n// Love_Music 收藏音乐管理区\r\nexport const insertLoveMusic = (params:{mid:string,uid:string})=>request('/Love_Music/insertLoveMusic',params)\r\nexport const removeLoveMusic = (params:{mid:string,uid:string})=>request('/Love_Music/removeLoveMusic',params)\r\nexport const findLoveMusicByUid = (params:{uid:string})=>request('/Love_Music/findLoveMusicByUid',params)\r\nexport const findNumByUidAndMid = (params:{mid:string,uid:string})=>request('/Love_Music/findNumByUidAndMid',params)\r\n\r\n// 网易搜索接口\r\nexport const getAudioURLByID = (id)=> axios({\r\n  timeout:5000,\r\n  url:'https://api.imjad.cn/cloudmusic',\r\n  method:'get',\r\n  params:{type:'song',id:id}\r\n}).then(resp=>Promise.resolve(resp.data.data[0].url))\r\n  .catch(err=>Promise.reject(err.message))\r\n\r\nexport const SearchMusicBy163 = (searchValue:string|number)=>axios({\r\n  timeout:5000,\r\n  url:'http://music.163.com/api/search/get/web',\r\n  method:'get',\r\n  params:{s:searchValue,type:1}\r\n}).then(  resp=>Promise.resolve(resp.data.result))\r\n  .catch(err=>Promise.reject(err.message))\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"accept/images/p1.jpg\";","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import {FC, useEffect, useState} from \"react\";\r\nimport {View,Navigator} from \"@tarojs/components\";\r\nimport Taro from '@tarojs/taro'\r\nimport {AtIcon, AtSearchBar} from 'taro-ui'\r\nimport './index.sass'\r\nimport './IconfontStyle.css'\r\n\r\ninterface IProps{\r\n  closeIcon?:boolean,\r\n  homeIcon?:boolean,\r\n  backIcon?:boolean,\r\n  searchBar?:boolean,\r\n  onSearchChange?:(value:string, event:Object)=>void,\r\n  onActionClick?:()=>void,\r\n  BarText?:string,\r\n  searchPlaceholder?:string,\r\n  searchValue?:string,\r\n  onClear?:() => void,\r\n  BackgroundColor?:string,\r\n  fontColor?:string,\r\n  fontsize?:number|string,\r\n  icon?:{value:string,size?:string|number,color?:string,onIconClick:()=>void}\r\n\r\n}\r\n\r\n//自定义导航栏\r\nconst NavigationBar:FC<IProps> = (props:IProps)=>{\r\n  const [Delta, setDelta] = useState(0);\r\n  const [IconFontsize, setIconFontsize] = useState(0);\r\n  const [BarHeight, setBarHeight] = useState(0);\r\n  const [MarginTop, setMarginTop] = useState(0);\r\n  const [fontboxWidth, setFontboxWidth] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const a = Taro.getMenuButtonBoundingClientRect()\r\n    //获取到系统的信息，便于计算导航栏\r\n    Taro.getSystemInfo({\r\n      success:res => {\r\n        const marginTop = res.statusBarHeight\r\n        const barheight = res.statusBarHeight+ a.height + (a.top - res.statusBarHeight) * 2\r\n        let l:number\r\n        if(!props.closeIcon&&!props.backIcon&&!props.homeIcon&&!props.icon) l=a.left*(1-0.05)\r\n        else l = a.left*(1-0.18)\r\n        setFontboxWidth(l)\r\n        setBarHeight(barheight)\r\n        setMarginTop(marginTop)\r\n        setIconFontsize(a.height/2+2)\r\n        setDelta(Taro.getCurrentPages().length-1)\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  return (\r\n    <View className='NBar_father' style={{minHeight:BarHeight,width:'100%'}}>\r\n      <View className='NBar_box' style={{backgroundColor:props.BackgroundColor}}>\r\n        <View className='icon_box' style={{marginTop:MarginTop,height:BarHeight-MarginTop}}>\r\n          {props.closeIcon?<Navigator openType='exit' target='miniProgram' className='iconfont icon-guanbi closeIcon' style={{fontSize:IconFontsize,color:props.fontColor}} />:''}\r\n          {props.homeIcon?<Navigator openType='navigateBack' delta={Delta} className='iconfont icon-home closeIcon' style={{fontSize:IconFontsize,color:props.fontColor}} />:''}\r\n          {props.backIcon?<Navigator openType='navigateBack' delta={1} className='iconfont icon-back closeIcon' style={{fontSize:IconFontsize,color:props.fontColor}} />:''}\r\n          {props.icon?\r\n              <AtIcon\r\n                customStyle={{fontSize:IconFontsize}}\r\n                className='closeIcon'\r\n                value={props.icon.value}\r\n                size={props.icon.size?props.icon.size:'30'}\r\n                color={props.icon.color?props.icon.color:'white'}\r\n                onClick={props.icon.onIconClick}\r\n              />:''}\r\n        </View>\r\n        <View\r\n          className='font_box'\r\n          style={{\r\n            marginTop:MarginTop,\r\n            fontSize:props.fontsize?props.fontsize:IconFontsize/1.3,\r\n            right:props.searchBar?fontboxWidth===Taro.getMenuButtonBoundingClientRect().left*(1-0.05)?'30%':'20%':0 ,\r\n            width:props.searchBar?fontboxWidth:'60%',\r\n            color:props.fontColor,\r\n          }}\r\n        >\r\n\r\n          {props.searchBar?\r\n            <AtSearchBar\r\n              className='search'\r\n              customStyle={{backgroundColor:props.BackgroundColor}}\r\n              maxLength={40}\r\n              value={props.searchValue?props.searchValue:''}\r\n              onChange={(value:string, event:Object)=>{props.onSearchChange && props.onSearchChange(value,event)}}\r\n              actionName='搜索'\r\n              placeholder={props.searchPlaceholder}\r\n              onActionClick={props.onActionClick}\r\n              onClear={props.onClear}\r\n            />:props.BarText}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  )\r\n};\r\nNavigationBar.defaultProps = {\r\n  BarText:'首页',\r\n  closeIcon:false,\r\n  homeIcon:false,\r\n  backIcon:false,\r\n  searchBar:false,\r\n  BackgroundColor:'#d43c33',\r\n  fontColor:'white'\r\n}\r\n\r\nexport default NavigationBar\r\n","import {axios} from 'taro-axios'\r\n// 封装功能方法\r\ntype IMethod = 'GET'|'POST'|'DELETE'|'PUT'\r\n\r\nconst request = (url :string, params?:{[name:string]:any}, method:IMethod = 'GET',data?:any )=> axios({\r\n    baseURL:'http://localhost:8888/OnlineMusic',\r\n    timeout:10000,\r\n    url,\r\n    method,\r\n    params,\r\n    data,\r\n  headers:{\r\n    contentType:\"application/json;charset=utf-8\"\r\n  }\r\n  }).then(resp=>Promise.resolve(resp.data))\r\n    .catch(err=>Promise.reject(err.message))\r\nexport default request\r\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAIA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;AAKA;AAAA;AACA;AAAA;AANA;AAQA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;AAKA;AAAA;AACA;AAAA;AANA;;;;;;;;;;;;AC7DA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;AAoBA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AALA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAFA;AAaA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AATA;AAZA;AAfA;AADA;AA2CA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAUA;;;;;;;;;;;;;AC3GA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAPA;AAUA;AAAA;AACA;AAAA;AAXA;AACA;AAWA;;;;A","sourceRoot":""}