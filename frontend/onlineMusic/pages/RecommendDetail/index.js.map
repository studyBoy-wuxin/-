{"version":3,"file":"pages/RecommendDetail/index.js","sources":["webpack:///._src_pages_RecommendDetail_index.tsx","webpack:///._src_pages_RecommendDetail_index.sass","webpack:///./src/pages/RecommendDetail/index.tsx?20c5"],"sourcesContent":["import {FC, useEffect, useState} from \"react\";\r\nimport {Image, View,Text} from \"@tarojs/components\";\r\nimport Taro from '@tarojs/taro'\r\nimport {AtMessage} from \"taro-ui\";\r\nimport './index.sass'\r\nimport {findMusicByrid} from \"../../RouteInfo\";\r\nimport {Music} from \"../Admin\";\r\nimport NavigationBar from \"../../components/NavigationBar\";\r\n\r\ntype RecommendSongType={\r\n  rid:string,\r\n  name:string,\r\n  author:string,\r\n  img_url:string,\r\n  info:string,\r\n  listencnt:number\r\n}\r\n\r\nconst RecommendDetail: FC = () => {\r\n\r\n  const [MusicList, setMusicList] = useState<Music[]>();\r\n  const [RecommendSong, setRecommendSong] = useState<RecommendSongType>({rid:'',\r\n    name:'',\r\n    author:'',\r\n    img_url:'',\r\n    info:'',\r\n    listencnt:1});\r\n\r\n  const getMusicByRid = async (rid:string)=>{\r\n    try{\r\n      const data =await findMusicByrid({rid})\r\n      setMusicList(data)\r\n    }catch (e) {Taro.atMessage({'message':e,'type':'error'})}\r\n  }\r\n\r\n  const onPlay = (music:Music)=>{\r\n    const app = Taro.getApp()\r\n    app.musicInfo = music\r\n    Taro.switchTab({url:'/pages/SongDetail/index'})\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const rid = Taro.getCurrentInstance().router?.params.rid\r\n    const recommend = Taro.getCurrentInstance().router?.params.recommend\r\n    const a = JSON.parse(recommend as string)\r\n    recommend && setRecommendSong(a)\r\n    rid && getMusicByRid(rid)\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <View className='RecommendDetail_box'>\r\n      <NavigationBar BarText={RecommendSong.name==''?'歌单信息':RecommendSong.author+'的歌单'} backIcon />\r\n      <AtMessage />\r\n      {\r\n        RecommendSong && (\r\n        <View className='top' >\r\n          <Image src={RecommendSong.img_url} className='a' mode='center' />\r\n          <View className='top_left'>\r\n            <Image src={RecommendSong.img_url} mode='scaleToFill' />\r\n          </View>\r\n          <View className='top_right'>\r\n            <View className='songDetail'>\r\n              <View className='songListName'>\r\n                {RecommendSong.name}\r\n              </View>\r\n              <View className='authorName'>\r\n                {RecommendSong.author}\r\n              </View>\r\n              <View className='detail'>\r\n                {RecommendSong.info}\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </View>\r\n        )\r\n      }\r\n\r\n      <View className='bottom'>\r\n        <View className='bottom_header'>\r\n          <View className='iconfont icon icon-yunhang' />\r\n          <Text className='title'>播放全部</Text>\r\n          <Text>(共{MusicList?.length}首)</Text>\r\n        </View>\r\n\r\n        <View className='MusicInfo_box'>\r\n          {\r\n            MusicList?.map((item,index)=>(\r\n              <View className='MusucItem' key={item.mid} onClick={()=>onPlay(item)}>\r\n                <View>{index+1}</View>\r\n                <View className='musicInfo'>\r\n                  <Text>{item.name}</Text>\r\n                  <View className='a'><View className='iconfont iconw icon-wusunyinzhi' />{item.artist}</View>\r\n                </View>\r\n                <View className='iconfont iconb icon-yunhang' />\r\n              </View>\r\n            ))\r\n          }\r\n        </View>\r\n\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\nexport default RecommendDetail\r\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.tsx\"\nvar config = {\"navigationStyle\":\"custom\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/RecommendDetail/index', {root:{cn:[]}}, config || {}))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;AAWA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAHA;AAEA;AACA;AAHA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AAHA;AACA;AAMA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAGA;AAAA;AAAA;AAPA;AADA;AALA;AAsBA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAHA;AAMA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AANA;AADA;AAFA;AAPA;AA3BA;AAlCA;AACA;AAsFA;;;;;;;;;;;ACzGA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}