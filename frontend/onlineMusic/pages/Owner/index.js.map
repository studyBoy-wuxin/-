{"version":3,"file":"pages/Owner/index.js","sources":["webpack:///._src_pages_Owner_index.tsx","webpack:///._src_pages_Owner_index.less","webpack:///./src/pages/Owner/index.tsx?84fa"],"sourcesContent":["import {FC, useState} from \"react\";\r\nimport {View, Text, ScrollView, Image} from '@tarojs/components'\r\nimport Taro from '@tarojs/taro'\r\nimport {AtAvatar, AtIcon, AtList, AtListItem, AtMessage} from \"taro-ui\";\r\nimport './index.less'\r\nimport NavigationBar from \"../../components/NavigationBar\";\r\nimport useDidShow = Taro.useDidShow;\r\nimport {Music} from \"../Admin\";\r\n\r\ntype contentItem = {imgUrl:string,desc:string,color:string,antherInfo?:string,clickEvent?:()=>void}\r\ntype UserType = {\r\n  uid:string\r\n  uname:string\r\n  avater_url:string\r\n}\r\nconst initUser:UserType = {\r\n  uid:'3119004000',\r\n  uname:'无名氏',\r\n  avater_url:''\r\n\r\n}\r\nconst Owner:FC = ()=>{\r\n  const ToPages = (type:string)=>{\r\n    type === 'icon-shoucang' &&Taro.navigateTo({url:'/pages/MusicList/index?type=LoveMusic'})\r\n    // type === 'icon-geren6' &&Taro.navigateTo({url:'/pages/Experience/index'})\r\n    // type === 'icon-kechengguanli' &&Taro.navigateTo({url:'/pages/CourseInfo/index'})\r\n    // type === 'icon-huojiang' &&Taro.navigateTo({url:'/pages/CertificateInfo/index'})\r\n  }\r\n\r\n  const contentItemInfo:contentItem[] = [\r\n    {imgUrl:'icon-shoucang',desc:'收藏',color:'rgb(118,202,209)'},\r\n    {imgUrl:'icon-xiangxia4',desc:'本地',color:'rgb(247,162,162)'},\r\n    {imgUrl:'icon-shangchuanyunpan',desc:'云盘',color:'rgb(90,115,215)'},\r\n    {imgUrl:'icon-yigou',desc:'已购',color:'rgb(241,183,114)'},\r\n  ]\r\n\r\n\r\n  const [userInfo,setUserInfo] = useState<UserType>(initUser);\r\n  const [RecentPlayList, setRecentPlayList] = useState<Music[]>();\r\n\r\n  const checkUserInfo = ()=>Taro.navigateTo({url:'/pages/Owner/Update/index'})\r\n  const ToLoveMusic = ()=>Taro.navigateTo({url:'/pages/MusicList/index?type=LoveMusic'})\r\n\r\n  const ToLogin = ()=> Taro.navigateTo({url:'/pages/Login/index'})\r\n\r\n  const footerItemInfo:contentItem[] = [\r\n    {imgUrl:'user',desc:'个人信息',color:'',antherInfo:'完善个人信息',clickEvent:checkUserInfo},\r\n    {imgUrl:'star-2',desc:'我的收藏',color:'',antherInfo:'查看个人收藏',clickEvent:ToLoveMusic},\r\n    {imgUrl:'download-cloud',desc:'我的云盘',color:'',antherInfo:'查看收藏的云盘'},\r\n    {imgUrl:'video',desc:'我的视频',color:'',antherInfo:'查看收藏的视频'},\r\n  ]\r\n\r\n  useDidShow(()=>{\r\n    if(!Taro.getStorageSync('userInfo')){\r\n      Taro.atMessage({'message':'请先登录','type':'info'})\r\n    }else{\r\n      const user = Taro.getStorageSync('userInfo')\r\n      console.log('useDidshow',user)\r\n      user && setUserInfo(user)\r\n\r\n      const recentPlay = Taro.getStorageSync('recentPlay')\r\n      recentPlay && setRecentPlayList(recentPlay)\r\n    }\r\n  })\r\n\r\n  const PlaySong = (music:Music)=>{\r\n    const app = Taro.getApp()\r\n    app.musicInfo = music\r\n    Taro.switchTab({url:`/pages/SongDetail/index`})\r\n  }\r\n\r\n  return (\r\n    <View className='Owner_box'>\r\n      <NavigationBar BarText='我的主页' />\r\n      <View><AtMessage /></View>\r\n\r\n      <View className='Owner_header'>\r\n        <View className='top'>\r\n          <View className='avatar_box'>\r\n            <View className='avatar'>\r\n              {\r\n                userInfo.avater_url===''?\r\n                  <View className='iconfont icon icon-yonghutouxiang1' onClick={ToLogin} />:\r\n                  <AtAvatar circle image={userInfo.avater_url} />\r\n              }\r\n            </View>\r\n            <View className='stuInfo'>\r\n              <Text>{userInfo.uname}</Text>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </View>\r\n      <View className='Owner_middle'>\r\n        {\r\n          contentItemInfo?.map(item=>(\r\n            <View className='contentItem' key={item.desc} onClick={()=>ToPages(item.imgUrl)}>\r\n              <View className={`iconfont ${item.imgUrl}`} style={`font-size:30PX;color:${item.color};`} />\r\n              <View className='item_desc'>{item.desc}</View>\r\n            </View>\r\n          ))\r\n        }\r\n      </View>\r\n      <View className='Owner_footer'>\r\n        <View className='recentPlayContainer'>\r\n          <View className='top' onClick={()=>Taro.navigateTo({url:'/pages/MusicList/index?type=recent'})}>\r\n            <Text>最近播放</Text>\r\n            <View>更多<AtIcon value='chevron-right' size={20} /></View>\r\n          </View>\r\n          <ScrollView\r\n            className='scrollView'\r\n            scrollX\r\n            enableFlex\r\n          >\r\n            {\r\n              RecentPlayList ? RecentPlayList.slice(0,11).map(item=>(\r\n                <View className='scrollItem' onClick={()=>PlaySong(item)}><Image src={item.img_url} /></View>\r\n              )):<View className='noRecentPlay'>暂无播放记录.....</View>\r\n            }\r\n          </ScrollView>\r\n        </View>\r\n        <AtList>\r\n          {\r\n            footerItemInfo.map(item=>(\r\n              <AtListItem\r\n                title={item.desc}\r\n                note={item.antherInfo}\r\n                arrow='right'\r\n                iconInfo={{ size: 25, color: '#ff8589', value: item.imgUrl }}\r\n                onClick={item.clickEvent}\r\n              />\r\n            ))\r\n          }\r\n        </AtList>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\nexport default Owner\r\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.tsx\"\nvar config = {\"navigationStyle\":\"custom\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Owner/index', {root:{cn:[]}}, config || {}))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;AACA;AASA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAJA;AACA;AAMA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAVA;AACA;AAYA;AACA;AACA;AACA;AAAA;AAAA;AAHA;AACA;AAKA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AAOA;AAAA;AACA;AAAA;AADA;AARA;AADA;AADA;AAgBA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AADA;AAFA;AAUA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AARA;AALA;AAiBA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AALA;AADA;AAFA;AAlBA;AA9BA;AAnDA;AACA;AAmHA;;;;;;;;;;;ACzIA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}